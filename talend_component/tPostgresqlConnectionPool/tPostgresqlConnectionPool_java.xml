<?xml version="1.0" encoding="UTF-8"?>

<COMPONENT>
	<HEADER 
		AUTHOR="cimt AG" 
		COMPATIBILITY="ALL" 
		PLATEFORM="ALL"
		RELEASE_DATE="20160610A" 
		STARTABLE="true" 
		STATUS="PROD" 
		VERSION="1.3"
		SERIAL="">
		<SIGNATURE />
	</HEADER>
	<FAMILIES>
		<FAMILY>Databases/PostgreSQL</FAMILY>
		<FAMILY>Databases/Pool</FAMILY>
	</FAMILIES>
	<DOCUMENTATION>
		<URL/>
	</DOCUMENTATION>
	<CONNECTORS>
		<CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="1" MAX_INPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
		<CONNECTOR CTYPE="COMPONENT_OK"/>
		<CONNECTOR CTYPE="COMPONENT_ERROR"/>
	</CONNECTORS>
	<PARAMETERS>

	    <PARAMETER
			NAME="PROPERTY"
			FIELD="PROPERTY_TYPE"
			SHOW="true"
			NUM_ROW="1"
			SHOW_IF="MODE == 'CREATE'"
			REPOSITORY_VALUE="DATABASE:POSTGRESQL"
	    />

		<PARAMETER NAME="MODE" FIELD="CLOSED_LIST" NUM_ROW="2">
			<ITEMS DEFAULT="CREATE">
				<ITEM NAME="CREATE" VALUE="CREATE_POOL" />
				<ITEM NAME="CLOSE" VALUE="CLOSE_POOL" />
				<ITEM NAME="PROVIDE" VALUE="PROVIDE" />
			</ITEMS>
		</PARAMETER>

		<PARAMETER 
			NAME="HOST" 
			FIELD="TEXT" 
			NUM_ROW="10" 
			REQUIRED="true"
			REPOSITORY_VALUE="SERVER_NAME"
			SHOW_IF="MODE == 'CREATE'"
		>
			<DEFAULT>"127.0.0.1"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="PORT" 
			FIELD="TEXT" 
			NUM_ROW="10" 
			REQUIRED="true"
			REPOSITORY_VALUE="PORT"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"5432"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="DATABASE" 
			FIELD="TEXT" 
			NUM_ROW="15"
			REQUIRED="true" 
			REPOSITORY_VALUE="SID"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"mysql"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER
			NAME="SCHEMA_DB"
			FIELD="TEXT"
			NUM_ROW="15"
			REQUIRED="true"
			REPOSITORY_VALUE="SCHEMA"
			SHOW_IF="MODE == 'CREATE'"
		>
			<DEFAULT>""</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="USER" 
			FIELD="TEXT" 
			NUM_ROW="20" 
			REQUIRED="true"
			REPOSITORY_VALUE="USERNAME"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"postgres"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="PASS" 
			FIELD="PASSWORD" 
			NUM_ROW="20"
			REQUIRED="true" 
			REPOSITORY_VALUE="PASSWORD"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"postgres"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="ALIAS" 
			FIELD="TEXT" 
			NUM_ROW="50" 
			REQUIRED="true"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"PostgresqlConnectionPool"</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="CONNECTION_POOL" 
			FIELD="COMPONENT_LIST"
			FILTER="tPostgresqlConnectionPool" 
			NUM_ROW="60" 
			DYNAMIC_SETTINGS="true"
			SHOW_IF="MODE == 'CLOSE'" />
			
		<PARAMETER
			NAME="AUTO_COMMIT"
			FIELD="CHECK"
			NUM_ROW="70"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>false</DEFAULT>
    	</PARAMETER>

	</PARAMETERS>

	<ADVANCED_PARAMETERS>
	
		<PARAMETER 
			NAME="ADDITIONAL_PARAM" 
			FIELD="TEXT" 
			NUM_ROW="1"
			REPOSITORY_VALUE="PROPERTIES_STRING"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"application_name=" + jobName</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="TEST_ON_BORROW" 
			FIELD="CHECK" 
			NUM_ROW="20"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="VALIDATION_SQL" 
			FIELD="TEXT" 
			REQUIRED="true"
			NUM_ROW="30" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>"select current_date"</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="TIME_BETWEEN_CHECKS" 
			FIELD="TEXT" 
			REQUIRED="false"
			NUM_ROW="40" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>60000</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="TIME_IDLE_CONNECTION_IS_CHECKED" 
			FIELD="TEXT"
			REQUIRED="false" 
			NUM_ROW="40" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>30000</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="NUM_CONNECTIONS_CHECKED" 
			FIELD="TEXT"
			REQUIRED="false" 
			NUM_ROW="50" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>5</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="SET_INITIAL_SIZE" 
			FIELD="CHECK" 
			REQUIRED="true"
			NUM_ROW="60"
			SHOW_IF="MODE == 'CREATE'" />
			
		<PARAMETER 
			NAME="INITIAL_SIZE" 
			FIELD="TEXT" 
			REQUIRED="true"
			NUM_ROW="60" 
			SHOW_IF="(MODE == 'CREATE') and (SET_INITIAL_SIZE == 'true')">
			<DEFAULT>5</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="SET_MAX_TOTAL" 
			FIELD="CHECK" 
			REQUIRED="true"
			NUM_ROW="70"
			SHOW_IF="(MODE == 'CREATE')" />
			
		<PARAMETER 
			NAME="MAX_TOTAL" 
			FIELD="TEXT" 
			REQUIRED="true"
			NUM_ROW="70" 
			SHOW_IF="(MODE == 'CREATE') and (SET_MAX_TOTAL == 'true')">
			<DEFAULT>5</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="SET_MAX_WAIT_FOR_CONNECTION" 
			FIELD="CHECK"
			REQUIRED="true"
			NUM_ROW="90" 
			SHOW_IF="(MODE == 'CREATE')" />
		
		<PARAMETER 
			NAME="MAX_WAIT_FOR_CONNECTION" 
			FIELD="TEXT"
			REQUIRED="true"
			NUM_ROW="90" 
			SHOW_IF="(MODE == 'CREATE') and (SET_MAX_WAIT_FOR_CONNECTION == 'true')">
			<DEFAULT>0</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="SET_INIT_SQL" 
			FIELD="CHECK" 
			REQUIRED="true"
			NUM_ROW="100"
			SHOW_IF="MODE == 'CREATE'" />
		
		<PARAMETER 
			NAME="INIT_SQL" 
			FIELD="TEXT" 
			NUM_ROW="100"
			REQUIRED="true"
			SHOW_IF="(MODE == 'CREATE') and (SET_INIT_SQL == 'true')">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="DEBUG" 
			FIELD="CHECK" 
			NUM_ROW="200"
			SHOW_IF="MODE == 'CREATE'" />

	</ADVANCED_PARAMETERS>

	<CODEGENERATION>
		<IMPORTS>
			<IMPORT NAME="de.cimt.talendcomp.connectionPool" MODULE="de.cimt.talendcomp.connectionPool-1.4-jar-with-dependencies.jar" REQUIRED="true"/>
			<IMPORT NAME="Driver-Postgres9" MODULE="postgresql-9.4-1201.jdbc41.jar" MVN="mvn:org.talend.libraries/postgresql-9.4-1201.jdbc41/6.0.0"  UrlPath="platform:/plugin/org.talend.libraries.jdbc.postgresql/lib/postgresql-9.4-1201.jdbc41.jar" REQUIRED_IF="DB_VERSION =='V9_X'" />
		</IMPORTS>
	</CODEGENERATION>
	<RETURNS>
		<RETURN NAME="DATABASE" TYPE="id_String" AVAILABILITY="AFTER" />
	</RETURNS>
</COMPONENT>