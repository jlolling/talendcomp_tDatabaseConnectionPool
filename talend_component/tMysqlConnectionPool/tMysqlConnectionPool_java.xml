<?xml version="1.0" encoding="UTF-8"?>

<COMPONENT>
	<HEADER 
		AUTHOR="cimt AG" 
		COMPATIBILITY="ALL" 
		PLATEFORM="ALL"
		RELEASE_DATE="20161123" 
		STARTABLE="true" 
		STATUS="PROD" 
		VERSION="1.9"
		SERIAL="">
		<SIGNATURE />
	</HEADER>
	<FAMILIES>
		<FAMILY>Databases/MySQL</FAMILY>
		<FAMILY>Databases/Pool</FAMILY>
	</FAMILIES>
	<DOCUMENTATION>
		<URL/>
	</DOCUMENTATION>
	<CONNECTORS>
		<CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="1" MAX_INPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
		<CONNECTOR CTYPE="COMPONENT_OK"/>
		<CONNECTOR CTYPE="COMPONENT_ERROR"/>
	</CONNECTORS>
	<PARAMETERS>

	    <PARAMETER
			NAME="PROPERTY"
			FIELD="PROPERTY_TYPE"
			SHOW="true"
			NUM_ROW="1"
			SHOW_IF="MODE == 'CREATE'"
			REPOSITORY_VALUE="DATABASE:MYSQL"
	    />

		<PARAMETER NAME="MODE" FIELD="CLOSED_LIST" NUM_ROW="2">
			<ITEMS DEFAULT="CREATE">
				<ITEM NAME="CREATE" VALUE="CREATE_POOL" />
				<ITEM NAME="CLOSE" VALUE="CLOSE_POOL" />
				<ITEM NAME="PROVIDE" VALUE="PROVIDE" />
				<ITEM NAME="CONNECTION_WORKAROUND" VALUE="CONNECTION_WORKAROUND" />
			</ITEMS>
		</PARAMETER>

		<PARAMETER 
			NAME="HOST" 
			FIELD="TEXT" 
			NUM_ROW="10" 
			REQUIRED="true"
			REPOSITORY_VALUE="SERVER_NAME"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"127.0.0.1"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="PORT" 
			FIELD="TEXT" 
			NUM_ROW="10" 
			REQUIRED="true"
			REPOSITORY_VALUE="PORT"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"3306"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="DATABASE" 
			FIELD="TEXT" 
			NUM_ROW="15"
			REQUIRED="true" 
			REPOSITORY_VALUE="SID"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"mysql"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="USER" 
			FIELD="TEXT" 
			NUM_ROW="20" 
			REQUIRED="true"
			REPOSITORY_VALUE="USERNAME"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"root"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="PASS" 
			FIELD="PASSWORD" 
			NUM_ROW="20"
			REQUIRED="true" 
			REPOSITORY_VALUE="PASSWORD"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>""</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="ALIAS" 
			FIELD="TEXT" 
			NUM_ROW="50" 
			REQUIRED="true"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"MysqlConnectionPool"</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="CONNECTION_POOL" 
			FIELD="COMPONENT_LIST"
			FILTER="tMysqlConnectionPool" 
			NUM_ROW="60" 
			DYNAMIC_SETTINGS="true"
			SHOW_IF="MODE == 'CLOSE'" />
			
		<PARAMETER 
			NAME="CONNECTION_TO_FIX" 
			FIELD="COMPONENT_LIST"
		   	FILTER="REGEXP:^t(.)*(Connection)(_9-0)*"
			NUM_ROW="60" 
			REQUIRED="true"
			SHOW_IF="MODE == 'CONNECTION_WORKAROUND'" />

		<PARAMETER
			NAME="AUTO_COMMIT"
			FIELD="CHECK"
			NUM_ROW="70"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>false</DEFAULT>
    	</PARAMETER>

	</PARAMETERS>

	<ADVANCED_PARAMETERS>
	
		<PARAMETER 
			NAME="ADDITIONAL_PARAM" 
			FIELD="TEXT" NUM_ROW="1"
			REPOSITORY_VALUE="PROPERTIES_STRING"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>"noDatetimeStringSync=true;rewriteBatchedStatements=true"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="TEST_ON_BORROW" 
			FIELD="CHECK" 
			NUM_ROW="2"
			REQUIRED="true"
			SHOW_IF="MODE == 'CREATE'">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="VALIDATION_SQL" 
			FIELD="TEXT" 
			REQUIRED="true"
			NUM_ROW="3" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>"select current_date"</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="TIME_BETWEEN_CHECKS" 
			FIELD="TEXT" 
			REQUIRED="false"
			NUM_ROW="4" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>60000</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="TIME_IDLE_CONNECTION_IS_CHECKED" 
			FIELD="TEXT"
			REQUIRED="false" 
			NUM_ROW="4" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>30000</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="NUM_CONNECTIONS_CHECKED" 
			FIELD="TEXT"
			REQUIRED="false" 
			NUM_ROW="5" 
			SHOW_IF="MODE == 'CREATE'" 
			GROUP="IDLE_TEST">
			<DEFAULT>5</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="SET_INITIAL_SIZE" 
			FIELD="CHECK" 
			NUM_ROW="6"
			REQUIRED="true"
			SHOW_IF="MODE == 'CREATE'" />
			
		<PARAMETER 
			NAME="INITIAL_SIZE" 
			FIELD="TEXT" 
			REQUIRED="true"
			NUM_ROW="6" 
			SHOW_IF="(MODE == 'CREATE') and (SET_INITIAL_SIZE == 'true')">
			<DEFAULT>5</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="SET_MAX_TOTAL" 
			FIELD="CHECK" 
			REQUIRED="true"
			NUM_ROW="7"
			SHOW_IF="(MODE == 'CREATE')" />
			
		<PARAMETER 
			NAME="MAX_TOTAL" 
			FIELD="TEXT" 
			REQUIRED="true"
			NUM_ROW="7" 
			SHOW_IF="(MODE == 'CREATE') and (SET_MAX_TOTAL == 'true')">
			<DEFAULT>5</DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="SET_MAX_WAIT_FOR_CONNECTION" 
			FIELD="CHECK"
			NUM_ROW="9" 
			REQUIRED="true"
			SHOW_IF="(MODE == 'CREATE')" />
		
		<PARAMETER 
			NAME="MAX_WAIT_FOR_CONNECTION" 
			FIELD="TEXT"
			REQUIRED="true"
			NUM_ROW="9" 
			SHOW_IF="(MODE == 'CREATE') and (SET_MAX_WAIT_FOR_CONNECTION == 'true')">
			<DEFAULT>0</DEFAULT>
		</PARAMETER>

		<PARAMETER 
			NAME="SET_INIT_SQL" 
			FIELD="CHECK" 
			NUM_ROW="10"
			REQUIRED="true"
			SHOW_IF="MODE == 'CREATE'" />
		
		<PARAMETER 
			NAME="INIT_SQL" 
			FIELD="TEXT" 
			NUM_ROW="10"
			REQUIRED="true"
			SHOW_IF="(MODE == 'CREATE') and (SET_INIT_SQL == 'true')">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		
		<PARAMETER 
			NAME="DEBUG" 
			FIELD="CHECK" 
			NUM_ROW="20"
			SHOW_IF="MODE == 'CREATE'" />

	</ADVANCED_PARAMETERS>

	<CODEGENERATION>
		<IMPORTS>
			<IMPORT NAME="cimt-talendcomp-connectionpool" MODULE="cimt-talendcomp-connectionpool-1.9.jar" REQUIRED="true"/>
			<IMPORT NAME="Mysql_Driver5" MODULE="mysql-connector-java-5.1.30-bin.jar" REQUIRED_IF="true" />
		</IMPORTS>
	</CODEGENERATION>
	<RETURNS>
		<RETURN NAME="DATABASE" TYPE="id_String" AVAILABILITY="AFTER" />
	</RETURNS>
</COMPONENT>